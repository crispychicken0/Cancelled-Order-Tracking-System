<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة العروض - Crispy Chicken</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- تقويم -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ar.js"></script>
    
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f9fafb;
        }
        
        /* Sidebar */
        #sidebar {
            transition: transform 0.3s ease;
        }
        
        .sidebar-collapsed .menu-text {
            display: none;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            min-width: 300px;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast-success {
            border-right: 4px solid #10b981;
        }
        
        .toast-error {
            border-right: 4px solid #ef4444;
        }
        
        .toast-info {
            border-right: 4px solid #3b82f6;
        }
        
        /* Charts */
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease;
        }
        
        /* Utility */
        .hidden {
            display: none !important;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            #sidebar {
                transform: translateX(100%);
            }
            
            #sidebar.open {
                transform: translateX(0);
            }
        }
        
        /* Loading */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Offer type badges */
        .badge-fixed {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .badge-flash {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .badge-value {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        /* Status badges */
        .badge-active {
            background-color: #dcfce7;
            color: #166534;
        }
        
        .badge-inactive {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        /* Table styles */
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px;
            text-align: right;
            border-bottom: 1px solid #e5e7eb;
        }
        
        th {
            background-color: #f9fafb;
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f9fafb;
        }
        
        /* Login page */
        .login-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .login-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            overflow: hidden;
        }
        
        /* Calendar */
        .calendar-container {
            max-width: 100%;
        }
        
        /* Form validation */
        .input-error {
            border-color: #ef4444 !important;
        }
        
        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        /* Marketing campaign cards */
        .campaign-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .campaign-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        /* Data table */
        .data-table {
            overflow-x: auto;
        }
        
        .data-table table {
            min-width: 600px;
        }
        
        /* Tabs */
        .tab.active {
            border-bottom: 2px solid #f59e0b;
            color: #f59e0b;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Login Section (Initially hidden after auth implementation) -->
    <section id="loginSection" class="login-container hidden">
        <div class="login-card">
            <div class="p-8">
                <div class="text-center mb-8">
                    <i class="fas fa-chicken text-5xl text-orange-500"></i>
                    <h2 class="text-2xl font-bold mt-4">تسجيل الدخول</h2>
                    <p class="text-gray-600">نظام إدارة العروض - Crispy Chicken</p>
                </div>
                
                <form id="loginForm">
                    <div class="mb-4">
                        <label for="email" class="block text-sm font-medium mb-1">البريد الإلكتروني</label>
                        <input type="email" id="email" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                        <div id="emailError" class="error-message hidden">يرجى إدخال بريد إلكتروني صحيح</div>
                    </div>
                    
                    <div class="mb-6">
                        <label for="password" class="block text-sm font-medium mb-1">كلمة المرور</label>
                        <input type="password" id="password" class="w-full px-4 py-2 border rounded-lg focus:ring-orange-500 focus:border-orange-500" required>
                        <div id="passwordError" class="error-message hidden">كلمة المرور يجب أن تكون 6 أحرف على الأقل</div>
                    </div>
                    
                    <div class="mb-4">
                        <button type="submit" class="w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition">تسجيل الدخول</button>
                    </div>
                    
                    <div class="text-center">
                        <a href="#" class="text-sm text-orange-600 hover:text-orange-700">نسيت كلمة المرور؟</a>
                    </div>
                </form>
            </div>
        </div>
    </section>
    
    <!-- Main App (Initially hidden until auth) -->
    <div id="appContainer" class="hidden">
        <!-- Toast Container -->
        <div id="toastContainer"></div>
        
        <!-- Header -->
        <header class="bg-white shadow-sm border-b sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <i class="fas fa-chicken text-2xl text-orange-500 ml-3"></i>
                        <h1 class="text-xl font-bold">نظام إدارة العروض - Crispy Chicken</h1>
                    </div>
                    <div class="flex items-center gap-4">
                        <button class="text-gray-600 hover:text-orange-500 relative">
                            <i class="fas fa-bell text-xl"></i>
                            <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">3</span>
                        </button>
                        <div class="relative">
                            <button id="profileBtn" class="flex items-center gap-2">
                                <img src="https://placehold.co/40x40" alt="User" class="w-10 h-10 rounded-full">
                                <span class="hidden md:block">أحمد كناوي</span>
                            </button>
                            <div id="profileMenu" class="absolute left-0 mt-2 w-48 bg-white rounded-lg shadow-lg hidden">
                                <a href="#" class="block px-4 py-2 hover:bg-gray-100">الملف الشخصي</a>
                                <a href="#" class="block px-4 py-2 hover:bg-gray-100">الإعدادات</a>
                                <hr>
                                <a href="#" id="logoutBtn" class="block px-4 py-2 hover:bg-gray-100 text-red-600">تسجيل الخروج</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="flex">
            <!-- Sidebar -->
            <aside id="sidebar" class="w-64 bg-gray-900 text-white fixed h-full z-30">
                <div class="p-4 border-b border-gray-700">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-chicken-hat text-2xl text-orange-500"></i>
                        <span class="text-xl font-semibold">Crispy Chicken</span>
                    </div>
                </div>
                <nav class="p-4">
                    <a href="#" data-section="dashboard" class="nav-item flex items-center gap-3 p-3 rounded hover:bg-gray-800 mb-2 bg-gray-800">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>لوحة التحكم</span>
                    </a>
                    <a href="#" data-section="offers" class="nav-item flex items-center gap-3 p-3 rounded hover:bg-gray-800 mb-2">
                        <i class="fas fa-tags"></i>
                        <span>إدارة العروض</span>
                    </a>
                    <a href="#" data-section="analytics" class="nav-item flex items-center gap-3 p-3 rounded hover:bg-gray-800 mb-2">
                        <i class="fas fa-chart-line"></i>
                        <span>التحليلات</span>
                    </a>
                    <a href="#" data-section="marketing" class="nav-item flex items-center gap-3 p-3 rounded hover:bg-gray-800 mb-2">
                        <i class="fas fa-bullhorn"></i>
                        <span>التسويق</span>
                    </a>
                    <a href="#" data-section="sheets" class="nav-item flex items-center gap-3 p-3 rounded hover:bg-gray-800 mb-2">
                        <i class="fas fa-table"></i>
                        <span>الجداول</span>
                    </a>
                </nav>
            </aside>
            
            <!-- Sidebar Overlay -->
            <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden lg:hidden"></div>
            
            <!-- Main Content -->
            <main class="flex-1 lg:mr-64">
                <!-- Sub Header -->
                <div class="bg-white shadow-sm p-4 sticky top-16 z-20">
                    <div class="flex items-center justify-between">
                        <button id="mobileMenuBtn" class="lg:hidden">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                        <div class="flex-1 max-w-xs mx-4">
                            <input type="text" placeholder="بحث..." class="w-full px-4 py-2 border rounded-full">
                        </div>
                        <button id="addOfferBtn" class="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600">
                            <i class="fas fa-plus ml-2"></i>إنشاء عرض جديد
                        </button>
                    </div>
                </div>
                
                <!-- Content Area -->
                <div class="p-6">
                    <!-- Dashboard Section -->
                    <section id="dashboardSection" class="section">
                        <h2 class="text-2xl font-bold mb-6">لوحة التحكم</h2>
                        
                        <!-- Stats Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="bg-orange-100 p-3 rounded-lg">
                                        <i class="fas fa-tags text-orange-600 text-xl"></i>
                                    </div>
                                    <span class="text-green-600">+12%</span>
                                </div>
                                <h3 class="text-2xl font-bold">6</h3>
                                <p class="text-gray-600">إجمالي العروض النشطة</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="bg-green-100 p-3 rounded-lg">
                                        <i class="fas fa-money-bill-wave text-green-600 text-xl"></i>
                                    </div>
                                    <span class="text-green-600">+8.5%</span>
                                </div>
                                <h3 class="text-2xl font-bold">$28,725</h3>
                                <p class="text-gray-600">إجمالي الإيرادات</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="bg-blue-100 p-3 rounded-lg">
                                        <i class="fas fa-shopping-cart text-blue-600 text-xl"></i>
                                    </div>
                                    <span class="text-green-600">+15.3%</span>
                                </div>
                                <h3 class="text-2xl font-bold">1,166</h3>
                                <p class="text-gray-600">إجمالي الاستخدامات</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="bg-purple-100 p-3 rounded-lg">
                                        <i class="fas fa-star text-purple-600 text-xl"></i>
                                    </div>
                                    <span class="text-green-600">+2.1%</span>
                                </div>
                                <h3 class="text-2xl font-bold">4.8</h3>
                                <p class="text-gray-600">متوسط التقييم</p>
                            </div>
                        </div>
                        
                        <!-- Charts -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="text-lg font-semibold mb-4">أداء العروض حسب النوع</h3>
                                <div class="chart-container">
                                    <canvas id="offersChart"></canvas>
                                </div>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="text-lg font-semibold mb-4">إيرادات العروض الشهرية</h3>
                                <div class="chart-container">
                                    <canvas id="revenueChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recent Offers -->
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-lg font-semibold mb-4">العروض الحالية</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="text-right p-2">العرض</th>
                                            <th class="text-right p-2">النوع</th>
                                            <th class="text-right p-2">الحالة</th>
                                            <th class="text-right p-2">الإجراءات</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b">
                                            <td class="p-2">عرض الاثنين والثلاثاء</td>
                                            <td class="p-2"><span class="badge-fixed px-2 py-1 rounded text-sm">ثابت</span></td>
                                            <td class="p-2"><span class="badge-active px-2 py-1 rounded text-sm">نشط</span></td>
                                            <td class="p-2">
                                                <button class="text-blue-600 hover:text-blue-800 ml-2" onclick="app.editOffer('OFF001')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-green-600 hover:text-green-800" onclick="app.viewAnalytics('OFF001')">
                                                    <i class="fas fa-chart-bar"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr class="border-b">
                                            <td class="p-2">خصم 20%</td>
                                            <td class="p-2"><span class="badge-flash px-2 py-1 rounded text-sm">محدود</span></td>
                                            <td class="p-2"><span class="badge-active px-2 py-1 rounded text-sm">نشط</span></td>
                                            <td class="p-2">
                                                <button class="text-blue-600 hover:text-blue-800 ml-2" onclick="app.editOffer('OFF002')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="text-green-600 hover:text-green-800" onclick="app.viewAnalytics('OFF002')">
                                                    <i class="fas fa-chart-bar"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Offers Section -->
                    <section id="offersSection" class="section hidden">
                        <h2 class="text-2xl font-bold mb-6">إدارة العروض</h2>
                        
                        <!-- Tabs -->
                        <div class="bg-white rounded-lg shadow-sm mb-6">
                            <div class="flex border-b">
                                <button class="tab px-4 py-2 font-medium active" data-tab="offers-list">قائمة العروض</button>
                                <button class="tab px-4 py-2 font-medium" data-tab="create-offer">إنشاء عرض جديد</button>
                                <button class="tab px-4 py-2 font-medium" data-tab="offer-calendar">تقويم العروض</button>
                            </div>
                        </div>
                        
                        <!-- Offers List Tab -->
                        <div id="offers-list" class="tab-content">
                            <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
                                <div class="flex flex-wrap gap-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">نوع العرض</label>
                                        <select class="w-full px-3 py-2 border rounded">
                                            <option>الكل</option>
                                            <option>عروض ثابتة</option>
                                            <option>عروض محدودة</option>
                                            <option>عروض القيمة المضافة</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">الحالة</label>
                                        <select class="w-full px-3 py-2 border rounded">
                                            <option>الكل</option>
                                            <option>نشط</option>
                                            <option>منتهي</option>
                                        </select>
                                    </div>
                                    <div class="ml-auto">
                                        <button class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">
                                            <i class="fas fa-filter ml-2"></i>تطبيق الفلاتر
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Offers Grid -->
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Offer Card 1 -->
                                <div class="bg-white rounded-lg shadow p-6">
                                    <div class="flex justify-between mb-4">
                                        <span class="badge-fixed px-3 py-1 rounded text-sm">عروض ثابتة</span>
                                        <span class="badge-active px-3 py-1 rounded text-sm">نشط</span>
                                    </div>
                                    <h3 class="text-lg font-semibold mb-2">عرض الاثنين والثلاثاء</h3>
                                    <p class="text-gray-600 mb-4">12 قطع دجاج + 3 ثوم</p>
                                    <div class="flex justify-between mb-4">
                                        <div>
                                            <p class="text-sm text-gray-500">السعر الأصلي</p>
                                            <p class="text-lg font-bold text-gray-400 line-through">45.00 درهم</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">السعر بعد الخصم</p>
                                            <p class="text-2xl font-bold text-orange-600">30.00 درهم</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between text-sm mb-4">
                                        <div>
                                            <p class="text-gray-500">المدة: الإثنين والثلاثاء</p>
                                            <p class="text-gray-500">الاستخدامات: 245</p>
                                        </div>
                                        <div>
                                            <p class="text-green-600 font-medium">نشط</p>
                                            <p class="text-gray-500">1/1/2023 - 31/12/2023</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="flex-1 px-3 py-2 bg-orange-100 text-orange-700 rounded hover:bg-orange-200" onclick="app.editOffer('OFF001')">
                                            <i class="fas fa-edit ml-1"></i>تعديل
                                        </button>
                                        <button class="flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200" onclick="app.viewAnalytics('OFF001')">
                                            <i class="fas fa-chart-bar ml-1"></i>تحليل
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Offer Card 2 -->
                                <div class="bg-white rounded-lg shadow p-6">
                                    <div class="flex justify-between mb-4">
                                        <span class="badge-flash px-3 py-1 rounded text-sm">عروض محدودة</span>
                                        <span class="badge-active px-3 py-1 rounded text-sm">نشط</span>
                                    </div>
                                    <h3 class="text-lg font-semibold mb-2">عرض سريع 20%</h3>
                                    <p class="text-gray-600 mb-4">خصم 20% على جميع الطلبات</p>
                                    <div class="flex justify-between mb-4">
                                        <div>
                                            <p class="text-sm text-gray-500">السعر الأصلي</p>
                                            <p class="text-lg font-bold text-gray-400 line-through">50.00 درهم</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">السعر بعد الخصم</p>
                                            <p class="text-2xl font-bold text-orange-600">40.00 درهم</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between text-sm mb-4">
                                        <div>
                                            <p class="text-gray-500">المدة: ساعتين فقط</p>
                                            <p class="text-gray-500">الاستخدامات: 178</p>
                                        </div>
                                        <div>
                                            <p class="text-green-600 font-medium">نشط</p>
                                            <p class="text-gray-500">1/7/2023 - 31/12/2023</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="flex-1 px-3 py-2 bg-orange-100 text-orange-700 rounded hover:bg-orange-200" onclick="app.editOffer('OFF002')">
                                            <i class="fas fa-edit ml-1"></i>تعديل
                                        </button>
                                        <button class="flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200" onclick="app.viewAnalytics('OFF002')">
                                            <i class="fas fa-chart-bar ml-1"></i>تحليل
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Create Offer Tab -->
                        <div id="create-offer" class="tab-content hidden">
                            <div class="bg-white rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold mb-4">إنشاء عرض جديد</h3>
                                <form id="createOfferForm" class="space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-1">اسم العرض</label>
                                            <input type="text" id="offerName" class="w-full px-3 py-2 border rounded" required>
                                            <div id="offerNameError" class="error-message hidden">يرجى إدخال اسم العرض</div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">نوع العرض</label>
                                            <select id="offerType" class="w-full px-3 py-2 border rounded" required>
                                                <option value="">اختر النوع</option>
                                                <option value="fixed">عروض ثابتة</option>
                                                <option value="flash">عروض محدودة</option>
                                                <option value="value">عروض القيمة المضافة</option>
                                            </select>
                                            <div id="offerTypeError" class="error-message hidden">يرجى اختيار نوع العرض</div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">تاريخ البدء</label>
                                            <input type="text" id="startDate" class="datepicker w-full px-3 py-2 border rounded" required>
                                            <div id="startDateError" class="error-message hidden">يرجى اختيار تاريخ البدء</div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">تاريخ الانتهاء</label>
                                            <input type="text" id="endDate" class="datepicker w-full px-3 py-2 border rounded" required>
                                            <div id="endDateError" class="error-message hidden">يرجى اختيار تاريخ الانتهاء</div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">السعر الأصلي</label>
                                            <input type="number" id="originalPrice" step="0.01" class="w-full px-3 py-2 border rounded" required>
                                            <div id="originalPriceError" class="error-message hidden">يرجى إدخال السعر الأصلي</div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">السعر بعد الخصم</label>
                                            <input type="number" id="discountPrice" step="0.01" class="w-full px-3 py-2 border rounded" required>
                                            <div id="discountPriceError" class="error-message hidden">يرجى إدخال السعر بعد الخصم</div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">وصف العرض</label>
                                        <textarea id="offerDescription" class="w-full px-3 py-2 border rounded" rows="3" required></textarea>
                                        <div id="offerDescriptionError" class="error-message hidden">يرجى إدخال وصف العرض</div>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="isActive" class="ml-2" checked>
                                        <label for="isActive" class="text-sm font-medium">تفعيل العرض فوراً</label>
                                    </div>
                                    <div class="flex justify-end gap-3">
                                        <button type="button" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">إلغاء</button>
                                        <button type="submit" class="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">حفظ العرض</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Offer Calendar Tab -->
                        <div id="offer-calendar" class="tab-content hidden">
                            <div class="bg-white rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold mb-4">تقويم العروض</h3>
                                <div id="calendar" class="calendar-container"></div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Analytics Section -->
                    <section id="analyticsSection" class="section hidden">
                        <h2 class="text-2xl font-bold mb-6">التحليلات</h2>
                        
                        <!-- Analytics Filters -->
                        <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
                            <div class="flex flex-wrap gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1">الفترة</label>
                                    <select class="w-full px-3 py-2 border rounded">
                                        <option>آخر 7 أيام</option>
                                        <option>آخر 30 يوم</option>
                                        <option>آخر 3 أشهر</option>
                                        <option>آخر سنة</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">نوع العرض</label>
                                    <select class="w-full px-3 py-2 border rounded">
                                        <option>الكل</option>
                                        <option>عروض ثابتة</option>
                                        <option>عروض محدودة</option>
                                        <option>عروض القيمة المضافة</option>
                                    </select>
                                </div>
                                <div class="ml-auto">
                                    <button class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">
                                        <i class="fas fa-filter ml-2"></i>تطبيق الفلاتر
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Analytics Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="bg-blue-100 p-3 rounded-lg">
                                        <i class="fas fa-eye text-blue-600 text-xl"></i>
                                    </div>
                                    <span class="text-green-600">+18.2%</span>
                                </div>
                                <h3 class="text-2xl font-bold">24,568</h3>
                                <p class="text-gray-600">مشاهدات العروض</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="bg-green-100 p-3 rounded-lg">
                                        <i class="fas fa-mouse-pointer text-green-600 text-xl"></i>
                                    </div>
                                    <span class="text-green-600">+12.5%</span>
                                </div>
                                <h3 class="text-2xl font-bold">8,432</h3>
                                <p class="text-gray-600">نقرات على العروض</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="bg-purple-100 p-3 rounded-lg">
                                        <i class="fas fa-percentage text-purple-600 text-xl"></i>
                                    </div>
                                    <span class="text-red-600">-3.1%</span>
                                </div>
                                <h3 class="text-2xl font-bold">34.3%</h3>
                                <p class="text-gray-600">معدل التحويل</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="bg-yellow-100 p-3 rounded-lg">
                                        <i class="fas fa-clock text-yellow-600 text-xl"></i>
                                    </div>
                                    <span class="text-green-600">+5.7%</span>
                                </div>
                                <h3 class="text-2xl font-bold">2:45</h3>
                                <p class="text-gray-600">متوسط الوقت في الصفحة</p>
                            </div>
                        </div>
                        
                        <!-- Analytics Charts -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="text-lg font-semibold mb-4">أداء العروض</h3>
                                <div class="chart-container">
                                    <canvas id="performanceChart"></canvas>
                                </div>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg shadow">
                                <h3 class="text-lg font-semibold mb-4">معدل التحويل حسب النوع</h3>
                                <div class="chart-container">
                                    <canvas id="conversionChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Top Offers Table -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold mb-4">أفضل العروض أداءً</h3>
                            <div class="data-table">
                                <table class="w-full">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="text-right p-2">اسم العرض</th>
                                            <th class="text-right p-2">النوع</th>
                                            <th class="text-right p-2">المشاهدات</th>
                                            <th class="text-right p-2">النقرات</th>
                                            <th class="text-right p-2">معدل التحويل</th>
                                            <th class="text-right p-2">الإيرادات</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b">
                                            <td class="p-2">عرض الاثنين والثلاثاء</td>
                                            <td class="p-2"><span class="badge-fixed px-2 py-1 rounded text-sm">ثابت</span></td>
                                            <td class="p-2">8,456</td>
                                            <td class="p-2">2,345</td>
                                            <td class="p-2">27.7%</td>
                                            <td class="p-2">$12,450</td>
                                        </tr>
                                        <tr class="border-b">
                                            <td class="p-2">عرض سريع 20%</td>
                                            <td class="p-2"><span class="badge-flash px-2 py-1 rounded text-sm">محدود</span></td>
                                            <td class="p-2">6,234</td>
                                            <td class="p-2">1,876</td>
                                            <td class="p-2">30.1%</td>
                                            <td class="p-2">$9,870</td>
                                        </tr>
                                        <tr class="border-b">
                                            <td class="p-2">وجبة العائلة</td>
                                            <td class="p-2"><span class="badge-value px-2 py-1 rounded text-sm">قيمة مضافة</span></td>
                                            <td class="p-2">5,432</td>
                                            <td class="p-2">1,234</td>
                                            <td class="p-2">22.7%</td>
                                            <td class="p-2">$7,650</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Marketing Section -->
                    <section id="marketingSection" class="section hidden">
                        <h2 class="text-2xl font-bold mb-6">التسويق</h2>
                        
                        <!-- Marketing Tabs -->
                        <div class="bg-white rounded-lg shadow-sm mb-6">
                            <div class="flex border-b">
                                <button class="tab px-4 py-2 font-medium active" data-tab="campaigns-list">الحملات التسويقية</button>
                                <button class="tab px-4 py-2 font-medium" data-tab="create-campaign">إنشاء حملة جديدة</button>
                                <button class="tab px-4 py-2 font-medium" data-tab="email-marketing">التسويق عبر البريد</button>
                            </div>
                        </div>
                        
                        <!-- Campaigns List Tab -->
                        <div id="campaigns-list" class="tab-content">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Campaign Card 1 -->
                                <div class="campaign-card bg-white rounded-lg shadow p-6">
                                    <div class="flex justify-between mb-4">
                                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm">نشط</span>
                                        <span class="text-gray-500 text-sm">منذ 5 أيام</span>
                                    </div>
                                    <h3 class="text-lg font-semibold mb-2">حملة رمضان</h3>
                                    <p class="text-gray-600 mb-4">عروض خاصة بشهر رمضان المبارك</p>
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div>
                                            <p class="text-sm text-gray-500">الوصول</p>
                                            <p class="text-lg font-bold">24,568</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">التفاعل</p>
                                            <p class="text-lg font-bold">3,456</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">التحويلات</p>
                                            <p class="text-lg font-bold">456</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">التكلفة</p>
                                            <p class="text-lg font-bold">$1,200</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200">
                                            <i class="fas fa-edit ml-1"></i>تعديل
                                        </button>
                                        <button class="flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200">
                                            <i class="fas fa-chart-bar ml-1"></i>تحليل
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Campaign Card 2 -->
                                <div class="campaign-card bg-white rounded-lg shadow p-6">
                                    <div class="flex justify-between mb-4">
                                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm">مكتمل</span>
                                        <span class="text-gray-500 text-sm">منذ 15 يوم</span>
                                    </div>
                                    <h3 class="text-lg font-semibold mb-2">حملة العودة للمدرسة</h3>
                                    <p class="text-gray-600 mb-4">عروض خاصة بمناسبة العودة للمدارس</p>
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div>
                                            <p class="text-sm text-gray-500">الوصول</p>
                                            <p class="text-lg font-bold">18,234</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">التفاعل</p>
                                            <p class="text-lg font-bold">2,345</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">التحويلات</p>
                                            <p class="text-lg font-bold">345</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">التكلفة</p>
                                            <p class="text-lg font-bold">$980</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200">
                                            <i class="fas fa-copy ml-1"></i>نسخ
                                        </button>
                                        <button class="flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200">
                                            <i class="fas fa-chart-bar ml-1"></i>تحليل
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Campaign Card 3 -->
                                <div class="campaign-card bg-white rounded-lg shadow p-6">
                                    <div class="flex justify-between mb-4">
                                        <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded text-sm">مجدول</span>
                                        <span class="text-gray-500 text-sm">تبدأ بعد 3 أيام</span>
                                    </div>
                                    <h3 class="text-lg font-semibold mb-2">حملة العيد الوطني</h3>
                                    <p class="text-gray-600 mb-4">احتفالات العيد الوطني بعروض خاصة</p>
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div>
                                            <p class="text-sm text-gray-500">الميزانية</p>
                                            <p class="text-lg font-bold">$2,500</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">المدة</p>
                                            <p class="text-lg font-bold">7 أيام</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">المنصة</p>
                                            <p class="text-lg font-bold">جميعها</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">الجمهور</p>
                                            <p class="text-lg font-bold">الكل</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200">
                                            <i class="fas fa-edit ml-1"></i>تعديل
                                        </button>
                                        <button class="flex-1 px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200">
                                            <i class="fas fa-trash ml-1"></i>حذف
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Create Campaign Tab -->
                        <div id="create-campaign" class="tab-content hidden">
                            <div class="bg-white rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold mb-4">إنشاء حملة جديدة</h3>
                                <form id="createCampaignForm" class="space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-1">اسم الحملة</label>
                                            <input type="text" class="w-full px-3 py-2 border rounded" required>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">نوع الحملة</label>
                                            <select class="w-full px-3 py-2 border rounded" required>
                                                <option value="">اختر النوع</option>
                                                <option value="social">وسائل التواصل الاجتماعي</option>
                                                <option value="email">بريد إلكتروني</option>
                                                <option value="sms">رسائل نصية</option>
                                                <option value="ads">إعلانات مدفوعة</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">تاريخ البدء</label>
                                            <input type="text" class="datepicker w-full px-3 py-2 border rounded" required>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">تاريخ الانتهاء</label>
                                            <input type="text" class="datepicker w-full px-3 py-2 border rounded" required>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">الميزانية</label>
                                            <input type="number" step="0.01" class="w-full px-3 py-2 border rounded" required>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">الجمهور المستهدف</label>
                                            <select class="w-full px-3 py-2 border rounded" required>
                                                <option value="">اختر الجمهور</option>
                                                <option value="all">الجميع</option>
                                                <option value="new">عملاء جدد</option>
                                                <option value="returning">عملاء عائدين</option>
                                                <option value="vip">عملاء VIP</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">وصف الحملة</label>
                                        <textarea class="w-full px-3 py-2 border rounded" rows="3" required></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">العرض المرتبط</label>
                                        <select class="w-full px-3 py-2 border rounded">
                                            <option value="">اختر عرض</option>
                                            <option value="OFF001">عرض الاثنين والثلاثاء</option>
                                            <option value="OFF002">عرض سريع 20%</option>
                                        </select>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="campaignActive" class="ml-2" checked>
                                        <label for="campaignActive" class="text-sm font-medium">تفعيل الحملة فوراً</label>
                                    </div>
                                    <div class="flex justify-end gap-3">
                                        <button type="button" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">إلغاء</button>
                                        <button type="submit" class="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">حفظ الحملة</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Email Marketing Tab -->
                        <div id="email-marketing" class="tab-content hidden">
                            <div class="bg-white rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold mb-4">التسويق عبر البريد الإلكتروني</h3>
                                <div class="text-center py-12">
                                    <i class="fas fa-envelope-open-text text-5xl text-gray-300 mb-4"></i>
                                    <p class="text-gray-500 mb-4">قم بإنشاء حملات بريد إلكتروني فعالة للوصول إلى عملائك</p>
                                    <button class="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">
                                        <i class="fas fa-plus ml-2"></i>إنشاء حملة بريدية
                                    </button>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Sheets Section -->
                    <section id="sheetsSection" class="section hidden">
                        <h2 class="text-2xl font-bold mb-6">الجداول</h2>
                        
                        <!-- Sheets Tabs -->
                        <div class="bg-white rounded-lg shadow-sm mb-6">
                            <div class="flex border-b">
                                <button class="tab px-4 py-2 font-medium active" data-tab="offers-data">بيانات العروض</button>
                                <button class="tab px-4 py-2 font-medium" data-tab="revenue-data">بيانات الإيرادات</button>
                                <button class="tab px-4 py-2 font-medium" data-tab="customer-data">بيانات العملاء</button>
                            </div>
                        </div>
                        
                        <!-- Offers Data Tab -->
                        <div id="offers-data" class="tab-content">
                            <div class="bg-white rounded-lg shadow p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold">بيانات العروض</h3>
                                    <div class="flex gap-2">
                                        <button class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
                                            <i class="fas fa-filter ml-1"></i>فلترة
                                        </button>
                                        <button class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
                                            <i class="fas fa-download ml-1"></i>تصدير
                                        </button>
                                    </div>
                                </div>
                                <div class="data-table">
                                    <table class="w-full">
                                        <thead>
                                            <tr class="border-b">
                                                <th class="text-right p-2">كود العرض</th>
                                                <th class="text-right p-2">اسم العرض</th>
                                                <th class="text-right p-2">النوع</th>
                                                <th class="text-right p-2">تاريخ البدء</th>
                                                <th class="text-right p-2">تاريخ الانتهاء</th>
                                                <th class="text-right p-2">الاستخدامات</th>
                                                <th class="text-right p-2">الإيرادات</th>
                                                <th class="text-right p-2">الحالة</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b">
                                                <td class="p-2">OFF001</td>
                                                <td class="p-2">عرض الاثنين والثلاثاء</td>
                                                <td class="p-2"><span class="badge-fixed px-2 py-1 rounded text-sm">ثابت</span></td>
                                                <td class="p-2">2023-01-01</td>
                                                <td class="p-2">2023-12-31</td>
                                                <td class="p-2">245</td>
                                                <td class="p-2">$7,350</td>
                                                <td class="p-2"><span class="badge-active px-2 py-1 rounded text-sm">نشط</span></td>
                                            </tr>
                                            <tr class="border-b">
                                                <td class="p-2">OFF002</td>
                                                <td class="p-2">عرض سريع 20%</td>
                                                <td class="p-2"><span class="badge-flash px-2 py-1 rounded text-sm">محدود</span></td>
                                                <td class="p-2">2023-07-01</td>
                                                <td class="p-2">2023-12-31</td>
                                                <td class="p-2">178</td>
                                                <td class="p-2">$7,120</td>
                                                <td class="p-2"><span class="badge-active px-2 py-1 rounded text-sm">نشط</span></td>
                                            </tr>
                                            <tr class="border-b">
                                                <td class="p-2">OFF003</td>
                                                <td class="p-2">وجبة العائلة</td>
                                                <td class="p-2"><span class="badge-value px-2 py-1 rounded text-sm">قيمة مضافة</span></td>
                                                <td class="p-2">2023-06-01</td>
                                                <td class="p-2">2023-08-31</td>
                                                <td class="p-2">156</td>
                                                <td class="p-2">$4,680</td>
                                                <td class="p-2"><span class="badge-inactive px-2 py-1 rounded text-sm">منتهي</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Revenue Data Tab -->
                        <div id="revenue-data" class="tab-content hidden">
                            <div class="bg-white rounded-lg shadow p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold">بيانات الإيرادات</h3>
                                    <div class="flex gap-2">
                                        <button class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
                                            <i class="fas fa-filter ml-1"></i>فلترة
                                        </button>
                                        <button class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
                                            <i class="fas fa-download ml-1"></i>تصدير
                                        </button>
                                    </div>
                                </div>
                                <div class="data-table">
                                    <table class="w-full">
                                        <thead>
                                            <tr class="border-b">
                                                <th class="text-right p-2">الشهر</th>
                                                <th class="text-right p-2">إجمالي الإيرادات</th>
                                                <th class="text-right p-2">إيرادات العروض</th>
                                                <th class="text-right p-2">نسبة العروض</th>
                                                <th class="text-right p-2">عدد العروض</th>
                                                <th class="text-right p-2">متوسط الإيراد للعرض</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b">
                                                <td class="p-2">يناير</td>
                                                <td class="p-2">$45,230</td>
                                                <td class="p-2">$12,450</td>
                                                <td class="p-2">27.5%</td>
                                                <td class="p-2">3</td>
                                                <td class="p-2">$4,150</td>
                                            </tr>
                                            <tr class="border-b">
                                                <td class="p-2">فبراير</td>
                                                <td class="p-2">$52,180</td>
                                                <td class="p-2">$15,230</td>
                                                <td class="p-2">29.2%</td>
                                                <td class="p-2">4</td>
                                                <td class="p-2">$3,808</td>
                                            </tr>
                                            <tr class="border-b">
                                                <td class="p-2">مارس</td>
                                                <td class="p-2">$48,960</td>
                                                <td class="p-2">$13,870</td>
                                                <td class="p-2">28.3%</td>
                                                <td class="p-2">3</td>
                                                <td class="p-2">$4,623</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Customer Data Tab -->
                        <div id="customer-data" class="tab-content hidden">
                            <div class="bg-white rounded-lg shadow p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold">بيانات العملاء</h3>
                                    <div class="flex gap-2">
                                        <button class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
                                            <i class="fas fa-filter ml-1"></i>فلترة
                                        </button>
                                        <button class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
                                            <i class="fas fa-download ml-1"></i>تصدير
                                        </button>
                                    </div>
                                </div>
                                <div class="data-table">
                                    <table class="w-full">
                                        <thead>
                                            <tr class="border-b">
                                                <th class="text-right p-2">العميل</th>
                                                <th class="text-right p-2">البريد الإلكتروني</th>
                                                <th class="text-right p-2">عدد الطلبات</th>
                                                <th class="text-right p-2">إجمالي الإنفاق</th>
                                                <th class="text-right p-2">آخر طلب</th>
                                                <th class="text-right p-2">الحالة</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b">
                                                <td class="p-2">أحمد محمد</td>
                                                <td class="p-2">ahmed@example.com</td>
                                                <td class="p-2">24</td>
                                                <td class="p-2">$1,245</td>
                                                <td class="p-2">2023-09-15</td>
                                                <td class="p-2"><span class="badge-active px-2 py-1 rounded text-sm">نشط</span></td>
                                            </tr>
                                            <tr class="border-b">
                                                <td class="p-2">فاطمة علي</td>
                                                <td class="p-2">fatima@example.com</td>
                                                <td class="p-2">18</td>
                                                <td class="p-2">$980</td>
                                                <td class="p-2">2023-09-10</td>
                                                <td class="p-2"><span class="badge-active px-2 py-1 rounded text-sm">نشط</span></td>
                                            </tr>
                                            <tr class="border-b">
                                                <td class="p-2">محمد خالد</td>
                                                <td class="p-2">mohammed@example.com</td>
                                                <td class="p-2">12</td>
                                                <td class="p-2">$650</td>
                                                <td class="p-2">2023-08-28</td>
                                                <td class="p-2"><span class="badge-inactive px-2 py-1 rounded text-sm">غير نشط</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>
    <script>
        // Declare app in the global scope
        let app;
        
        class App {
            constructor() {
                this.currentSection = 'dashboard';
                this.charts = {};
                this.isAuthenticated = false;
                this.offers = JSON.parse(localStorage.getItem('offers')) || [];
                this.chartConfigs = {
                    offers: {
                        type: 'doughnut',
                        data: {
                            labels: ['عروض ثابتة', 'عروض محدودة', 'قيمة مضافة', 'عروض منصات'],
                            datasets: [{
                                data: [30, 25, 20, 25],
                                backgroundColor: ['#F59E0B', '#3B82F6', '#10B981', '#EC4899']
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    },
                    revenue: {
                        type: 'line',
                        data: {
                            labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'],
                            datasets: [{
                                label: 'الإيرادات',
                                data: [12000, 19000, 15000, 25000, 22000, 30000],
                                borderColor: '#F59E0B',
                                backgroundColor: 'rgba(245, 158, 11, 0.1)',
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            }
                        }
                    },
                    performance: {
                        type: 'bar',
                        data: {
                            labels: ['عرض الاثنين والثلاثاء', 'عرض سريع 20%', 'وجبة العائلة', 'عرض نهاية الأسبوع'],
                            datasets: [{
                                label: 'المشاهدات',
                                data: [8456, 6234, 5432, 4321],
                                backgroundColor: '#3B82F6'
                            }, {
                                label: 'النقرات',
                                data: [2345, 1876, 1234, 987],
                                backgroundColor: '#10B981'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    },
                    conversion: {
                        type: 'radar',
                        data: {
                            labels: ['عروض ثابتة', 'عروض محدودة', 'قيمة مضافة', 'عروض منصات'],
                            datasets: [{
                                label: 'معدل التحويل',
                                data: [27.7, 30.1, 22.7, 18.5],
                                backgroundColor: 'rgba(245, 158, 11, 0.2)',
                                borderColor: '#F59E0B',
                                pointBackgroundColor: '#F59E0B'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                r: {
                                    beginAtZero: true,
                                    max: 40
                                }
                            }
                        }
                    }
                };
                this.init();
            }
            
            init() {
                this.checkAuth();
                this.setupEventListeners();
                this.initCharts();
                this.loadSectionFromURL();
                this.loadOffers();
            }
            
            checkAuth() {
                const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
                
                if (isLoggedIn) {
                    this.isAuthenticated = true;
                    document.getElementById('loginSection').classList.add('hidden');
                    document.getElementById('appContainer').classList.remove('hidden');
                } else {
                    this.isAuthenticated = false;
                    document.getElementById('loginSection').classList.remove('hidden');
                    document.getElementById('appContainer').classList.add('hidden');
                }
            }
            
            login(email, password) {
                // Validate email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    document.getElementById('emailError').classList.remove('hidden');
                    document.getElementById('email').classList.add('input-error');
                    return false;
                } else {
                    document.getElementById('emailError').classList.add('hidden');
                    document.getElementById('email').classList.remove('input-error');
                }
                
                // Validate password
                if (password.length < 6) {
                    document.getElementById('passwordError').classList.remove('hidden');
                    document.getElementById('password').classList.add('input-error');
                    return false;
                } else {
                    document.getElementById('passwordError').classList.add('hidden');
                    document.getElementById('password').classList.remove('input-error');
                }
                
                // Simulate login API call
                if (email && password) {
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('user', JSON.stringify({ email, name: 'أحمد كناوي' }));
                    this.isAuthenticated = true;
                    document.getElementById('loginSection').classList.add('hidden');
                    document.getElementById('appContainer').classList.remove('hidden');
                    this.showToast('تم تسجيل الدخول بنجاح', 'success');
                    return true;
                }
            }
            
            setupEventListeners() {
                // Login form
                const loginForm = document.getElementById('loginForm');
                if (loginForm) {
                    loginForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        const email = document.getElementById('email').value;
                        const password = document.getElementById('password').value;
                        this.login(email, password);
                    });
                }
                
                // Navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = item.dataset.section;
                        this.showSection(section);
                    });
                });
                
                // Mobile menu
                document.getElementById('mobileMenuBtn')?.addEventListener('click', () => {
                    this.toggleMobileMenu();
                });
                
                // Sidebar overlay
                document.getElementById('sidebarOverlay')?.addEventListener('click', () => {
                    this.closeMobileMenu();
                });
                
                // Profile menu
                document.getElementById('profileBtn')?.addEventListener('click', () => {
                    document.getElementById('profileMenu').classList.toggle('hidden');
                });
                
                // Logout
                document.getElementById('logoutBtn')?.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.logout();
                });
                
                // Add offer
                document.getElementById('addOfferBtn')?.addEventListener('click', () => {
                    this.showSection('offers');
                    this.showTab('create-offer');
                });
                
                // Close menus when clicking outside
                document.addEventListener('click', (e) => {
                    this.closeMenusOutside(e);
                });
                
                // Tabs
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        const tabName = tab.dataset.tab;
                        this.showTab(tabName);
                    });
                });
                
                // Create offer form
                const createOfferForm = document.getElementById('createOfferForm');
                if (createOfferForm) {
                    createOfferForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.createOffer(e.target);
                    });
                }
                
                // Create campaign form
                const createCampaignForm = document.getElementById('createCampaignForm');
                if (createCampaignForm) {
                    createCampaignForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.createCampaign(e.target);
                    });
                }
                
                // Initialize datepickers
                this.initDatePickers();
                
                // Initialize calendar
                this.initCalendar();
            }
            
            initDatePickers() {
                const datepickers = document.querySelectorAll('.datepicker');
                datepickers.forEach(el => {
                    flatpickr(el, {
                        locale: "ar",
                        dateFormat: "Y-m-d",
                        allowInput: true
                    });
                });
            }
            
            initCalendar() {
                const calendarEl = document.getElementById('calendar');
                if (calendarEl) {
                    calendarEl.innerHTML = `
                        <div class="bg-gray-100 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <button class="p-2 rounded-full hover:bg-gray-200">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                                <h4 class="text-lg font-semibold">سبتمبر 2023</h4>
                                <button class="p-2 rounded-full hover:bg-gray-200">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                            </div>
                            <div class="grid grid-cols-7 gap-2 text-center">
                                <div class="font-semibold p-2">أحد</div>
                                <div class="font-semibold p-2">إثنين</div>
                                <div class="font-semibold p-2">ثلاثاء</div>
                                <div class="font-semibold p-2">أربعاء</div>
                                <div class="font-semibold p-2">خميس</div>
                                <div class="font-semibold p-2">جمعة</div>
                                <div class="font-semibold p-2">سبت</div>
                                
                                ${Array.from({length: 35}, (_, i) => 
                                    `<div class="p-2 border rounded ${i >= 26 && i <= 28 ? 'bg-orange-100 border-orange-300' : ''}">${i - 5 < 1 ? '' : i - 5}</div>`
                                ).join('')}
                            </div>
                            <div class="mt-4">
                                <div class="flex items-center mb-2">
                                    <div class="w-4 h-4 bg-orange-100 rounded mr-2"></div>
                                    <span class="text-sm">أيام بها عروض</span>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
            
            toggleMobileMenu() {
                document.getElementById('sidebar').classList.toggle('open');
                document.getElementById('sidebarOverlay').classList.toggle('hidden');
            }
            
            closeMobileMenu() {
                document.getElementById('sidebar').classList.remove('open');
                document.getElementById('sidebarOverlay').classList.add('hidden');
            }
            
            logout() {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('user');
                this.isAuthenticated = false;
                document.getElementById('loginSection').classList.remove('hidden');
                document.getElementById('appContainer').classList.add('hidden');
                this.showToast('تم تسجيل الخروج بنجاح', 'success');
            }
            
            closeMenusOutside(e) {
                if (!e.target.closest('#profileBtn') && !e.target.closest('#profileMenu')) {
                    document.getElementById('profileMenu')?.classList.add('hidden');
                }
            }
            
            showSection(sectionName) {
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.add('hidden');
                });
                
                const targetSection = document.getElementById(sectionName + 'Section');
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                    targetSection.classList.add('fade-in');
                    this.currentSection = sectionName;
                    
                    document.querySelectorAll('.nav-item').forEach(item => {
                        item.classList.remove('bg-gray-800');
                    });
                    document.querySelector(`[data-section="${sectionName}"]`)?.classList.add('bg-gray-800');
                    
                    this.updateURL(sectionName);
                    
                    this.lazyLoadSection(sectionName);
                }
            }
            
            lazyLoadSection(sectionName) {
                if (sectionName === 'analytics') {
                    setTimeout(() => {
                        this.initAnalyticsCharts();
                        this.showToast('تم تحميل بيانات التحليلات', 'info');
                    }, 500);
                }
            }
            
            updateURL(sectionName) {
                const url = new URL(window.location);
                url.searchParams.set('section', sectionName);
                window.history.pushState({}, '', url);
            }
            
            showTab(tabName) {
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`)?.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(tabName)?.classList.remove('hidden');
                
                if (tabName === 'offer-calendar') {
                    this.initCalendar();
                }
            }
            
            initCharts() {
                this.initChart('offersChart', this.chartConfigs.offers);
                this.initChart('revenueChart', this.chartConfigs.revenue);
            }
            
            initAnalyticsCharts() {
                this.initChart('performanceChart', this.chartConfigs.performance);
                this.initChart('conversionChart', this.chartConfigs.conversion);
            }
            
            initChart(canvasId, config) {
                const ctx = document.getElementById(canvasId);
                if (ctx) {
                    try {
                        this.charts[canvasId] = new Chart(ctx, config);
                    } catch (error) {
                        console.error(`Error initializing chart ${canvasId}:`, error);
                        this.showToast(`Failed to initialize chart ${canvasId}`, 'error');
                    }
                }
            }
            
            loadSectionFromURL() {
                const urlParams = new URLSearchParams(window.location.search);
                const section = urlParams.get('section');
                if (section) {
                    this.showSection(section);
                }
            }
            
            createOffer(form) {
                const formData = new FormData(form);
                const offerData = Object.fromEntries(formData);
                
                // Validate form
                let isValid = true;
                
                if (!offerData.offerName) {
                    document.getElementById('offerNameError').classList.remove('hidden');
                    document.getElementById('offerName').classList.add('input-error');
                    isValid = false;
                } else {
                    document.getElementById('offerNameError').classList.add('hidden');
                    document.getElementById('offerName').classList.remove('input-error');
                }
                
                if (!offerData.offerType) {
                    document.getElementById('offerTypeError').classList.remove('hidden');
                    document.getElementById('offerType').classList.add('input-error');
                    isValid = false;
                } else {
                    document.getElementById('offerTypeError').classList.add('hidden');
                    document.getElementById('offerType').classList.remove('input-error');
                }
                
                // Add more validation as needed...
                
                if (!isValid) return;
                
                this.showToast('جاري حفظ العرض...', 'info');
                
                setTimeout(() => {
                    const newOffer = {
                        id: 'OFF' + String(this.offers.length + 1).padStart(3, '0'),
                        ...offerData,
                        createdAt: new Date().toISOString()
                    };
                    
                    this.offers.push(newOffer);
                    localStorage.setItem('offers', JSON.stringify(this.offers));
                    
                    this.showToast('تم حفظ العرض بنجاح', 'success');
                    form.reset();
                    
                    this.showTab('offers-list');
                    this.loadOffers();
                }, 1500);
            }
            
            createCampaign(form) {
                const formData = new FormData(form);
                const campaignData = Object.fromEntries(formData);
                
                this.showToast('جاري حفظ الحملة...', 'info');
                
                setTimeout(() => {
                    this.showToast('تم حفظ الحملة بنجاح', 'success');
                    form.reset();
                    
                    this.showTab('campaigns-list');
                }, 1500);
            }
            
            loadOffers() {
                // In a real app, this would load offers from the server
                // For now, we'll just use the data from localStorage
                console.log('Loaded offers:', this.offers);
            }
            
            editOffer(offerId) {
                this.showToast(`جاري تحرير العرض: ${offerId}`, 'info');
                this.showSection('offers');
                this.showTab('create-offer');
                
                // In a real app, you would load the offer data into the form
            }
            
            viewAnalytics(offerId) {
                this.showToast(`عرض تحليلات العرض: ${offerId}`, 'info');
                this.showSection('analytics');
            }
            
            showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                toast.innerHTML = `
                    <div class="flex items-center gap-3">
                        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                document.getElementById('toastContainer').appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 10);
                
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            app = new App();
        });
        
        window.addEventListener('popstate', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const section = urlParams.get('section');
            if (section) {
                app.showSection(section);
            }
        });
    </script>
</body>
</html>
